<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rezonateR">
<title>Toy example of an analysis in rezonateR • rezonateR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Toy example of an analysis in rezonateR">
<meta property="og:description" content="rezonateR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rezonateR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.0000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Overview</h6>
    <a class="dropdown-item" href="../articles/overview.html">An overview of rezonateR 0.1.1</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Detailed walkthrough</h6>
    <a class="dropdown-item" href="../articles/import_save_basics.html">Importing .rez files, saving rezrObjs, and basic data structure</a>
    <a class="dropdown-item" href="../articles/time_seq.html">Time and sequence</a>
    <a class="dropdown-item" href="../articles/edit_easyEdit.html">Editing I: Using EasyEdit</a>
    <a class="dropdown-item" href="../articles/edit_tidyRez.html">Editing II: Using TidyRez</a>
    <a class="dropdown-item" href="../articles/edit_external.html">Editing III: Using external tools</a>
    <a class="dropdown-item" href="../articles/tree.html">Dealing with Trees</a>
    <a class="dropdown-item" href="../articles/track.html">Tracking down coreference phenomena</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Toy example of an analysis in rezonateR</h1>
            
      
      
      <div class="d-none name"><code>sample_proj.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"rezonators/rezonateR"</span><span class="op">)</span></span></code></pre></div>
<p>The aim of this article is to demonstrate, using a sample, highly
simplified project, what type of analysis may be conducted using
Rezonator and <code>rezonateR</code>. This particular example will
examine the choice of referential forms in spoken dialogue: What factors
lead to the choice of a longer form versus a shorter one? The data here
is the same as that used in the series of tutorials starting with
<code><a href="../articles/import_save_basics.html">vignette("import_save_basics")</a></code>, but this article will have
less focus on how to write the code, and more on answering the sample
research question.</p>
<p>This article does not assume that you have read any of the other
articles on <code>rezonateR</code>. So there is some overlap in the
topics covered. I will point you to other tutorials for further details
when necessary.</p>
<p>You are welcome to follow this tutorial in R. If you are reading this
in R using the file <code>sample_proj.Rmd</code>, you can simply click
on the ‘run’ button (green ‘play’ icon on the top right of each box). As
long as all the code blocks are run sequentially, the code should work;
otherwise, open a ticket on GitHub!</p>
<div class="section level2">
<h2 id="the-research-question">The research question<a class="anchor" aria-label="anchor" href="#the-research-question"></a>
</h2>
<p>It is often noted that in language, if a referent is more accessible
(for example, it is salient in the previous discourse or physical
context), we will tend to refer to it using a shorter and simpler form
form, whereas longer forms tend to be used for things that are less
accessible (for example, the first time we mention something). This
example will use the following factors to predict the length (in number
of characters) of a certain word:</p>
<ul>
<li>
<code>noPrevSubjMentionsIn20</code>: The number of coreferent
subject mentions within the 20 previous units.</li>
<li>
<code>noPrevNonSubjMentionsIn20</code>: The number of coreferent
non-subject mentions within the 20 previous units.</li>
<li>
<code>noCompetitors</code>: The number of competitors within the
five previous units.</li>
<li>
<code>Relation</code>: Is the current mention a subject?</li>
<li>
<code>number</code>: Is the current mention singular or plural?</li>
</ul>
<p>Thus, what we need to do within R is to create a data frame where
each row corresponds to a referential expresssion and contains all of
these factors as columns (plus <code>charCount</code>, the number of
characters).</p>
</div>
<div class="section level2">
<h2 id="the-data">The data<a class="anchor" aria-label="anchor" href="#the-data"></a>
</h2>
<p>The data used in this example is from the text <em>A Tree’s
Life</em>, a conversation between two sisters from the Santa Barbara
Corpus of Spoken American English. The first 162 lines have been
annotated here, which deals with the topic of one of the sisters’
roommates.</p>
<p>The file has been annotated for coreference (trails), resonance, as
well as argument structure (through trees). For this tutorial, resonance
will be ignored. Coreference chains include referential expressions
along with non-referring expressions that have been otherwise referred
back to (e.g. discourse deixis).</p>
<p>Two-layered trees indicate argument structure of each verb. The
verbal complex (including auxiliaries and adverbs that intervene between
the auxiliary and verb, but not arguments that intervene between
auxiliary and verb) is annotated as blank chunks (with chunkType =
“verb”) and serves as the root of each tree. Tree links are annotated as
Relation = “Subject” when it indicates a subject-verb relation;
otherwise Relation is left blank.</p>
<p>Figure 1 Shows an example of the Rezonator interface with trail (wavy
lines), resonances (straight lines) and a dependency tree in the nav
window:</p>
<div class="figure">
<img src="img/iosave-sbc007.PNG" style="width:100.0%" alt=""><p class="caption">Figure 1</p>
</div>
<p>There are two types of chunks in this file: Chunks that have been
created as part of a trail (mostly referential expressions), and verbs,
which are ‘blank chunks’, i.e. do not belong to any trail. They have
been annotated for two properties: <code>chunkType</code> (which is
<code>verb</code> for verbs and left blank for referential expressions)
and <code>largerChunk</code>, i.e. the larger chunk to which a chunk
belongs. Note that <code>number</code> is NOT annotated; it will instead
be annotateed with the help of <code>rezonateR</code>.</p>
<p><img src="sample_chunk.PNG" alt="Figure 2">[width=100%]</p>
</div>
<div class="section level2">
<h2 id="importing-the-file">Importing the file<a class="anchor" aria-label="anchor" href="#importing-the-file"></a>
</h2>
<p>The first step is to import the file. When importing a file, an
object called <code>rezrObj</code> is created. <code>rezrObj</code>
contains two kinds of elements: * A <code>nodeMap</code>, which contains
the data in the form of a series of interconnected nodes with attributes
* A series of <code>rezrDF</code>s, which are data frames containing
information about different elements of the file.</p>
<p>Some important <code>rezrDF</code>s include: <code>tokenDF</code>
(which contains the information about individual tokens of the original
file), <code>chunkDF</code> (which contains information about chunks),
<code>trackDF</code>, which contains information about entries of trails
(i.e. mentions in coreference chains), and <code>treeEntryDF</code>,
which contains information about entries on a tree.</p>
<p>Here’s the import code. It contains a) information about dividing the
chunks into layers and information about which fields of a token
contains text to be concatenated in <code>concatFields</code>. Here, we
divide the chunks into two layers, <code>verb</code> and
<code>refexpr</code> (for referential expressions - this actually
include some non-referential expressions which were put in track chains
anyway, but we ignore this for this tutorial). The fields
<code>text</code> and <code>transcript</code> of the Santa Barbara
Corpus are concatenated to form <code>text</code> and
<code>transcript</code> fields of larger structures like units and
chunks.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rezonators.github.io/rezonateR/">rezonateR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: dplyr</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="co">#&gt; Loading required package: readr</span></span>
<span><span class="co">#&gt; Loading required package: stringr</span></span>
<span><span class="co">#&gt; Loading required package: rlang</span></span>
<span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sbc007.rez"</span>, package <span class="op">=</span> <span class="st">"rezonateR"</span>, mustWork <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="va">layerRegex</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chunk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>field <span class="op">=</span> <span class="st">"chunkType"</span>,</span>
<span>                               regex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"verb"</span><span class="op">)</span>,</span>
<span>                               names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"verb"</span>, <span class="st">"refexpr"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">concatFields</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text"</span>, <span class="st">"transcript"</span><span class="op">)</span></span>
<span><span class="va">rez007</span> <span class="op">=</span> <span class="fu"><a href="../reference/importRez.html">importRez</a></span><span class="op">(</span><span class="va">path</span>,</span>
<span>                   layerRegex <span class="op">=</span> <span class="va">layerRegex</span>,</span>
<span>                   concatFields <span class="op">=</span> <span class="va">concatFields</span><span class="op">)</span></span>
<span><span class="co">#&gt; Import starting - please be patient ...</span></span>
<span><span class="co">#&gt; Creating node maps ...</span></span>
<span><span class="co">#&gt; Creating rezrDFs ...</span></span>
<span><span class="co">#&gt; Adding foreign fields to rezrDFs and sorting (this is the slowest step) ...</span></span>
<span><span class="co">#&gt; &gt;Adding to unit entry DF ...</span></span>
<span><span class="co">#&gt; &gt;Adding to unit DF ...</span></span>
<span><span class="co">#&gt; &gt;Adding to chunk DF ...</span></span>
<span><span class="co">#&gt; &gt;Adding to track DFs ...</span></span>
<span><span class="co">#&gt; &gt;Adding to track DFs ...</span></span>
<span><span class="co">#&gt; &gt;Adding to tree DFs ...</span></span>
<span><span class="co">#&gt; Splitting rezrDFs into layers ...</span></span>
<span><span class="co">#&gt; A few finishing touches ...</span></span>
<span><span class="co">#&gt; Done!</span></span></code></pre></div>
<p>As examples of the content inside the imported object, here are the
imported <code>chunkDF</code> members and <code>trackDF</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">chunkDF</span><span class="op">)</span></span>
<span><span class="co">#&gt; $refexpr</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 64 × 23</span></span></span>
<span><span class="co">#&gt;    id          doc   name   nest kind  place text  trans…¹ endNote order negPl…²</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 35E3E0AB68… sbc0… Chun…     2 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    Stay… Stay u… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1F6B5F0B3F… sbc0… Chun…     3 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    the … the pu… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 24FE2B219B… sbc0… Chun…     2 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    gett… gettin… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 158B579C1B… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    the … the mo… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2B6521E881… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    all … all th… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 5B854594DD… sbc0… Chun…     2 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    the … the wa… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 189552EBB1… sbc0… Chun…     2 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    the … the on… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 313D141E6D… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    the … the ho… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1E970FF5D9… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    all … all th… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 85C4F230E6… sbc0… Chun…     2 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    what… what t… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 54 more rows, 12 more variables: corpusSeq &lt;chr&gt;, pSentOrder &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   POS_dft &lt;chr&gt;, tokenSeq &lt;chr&gt;, chunkType &lt;chr&gt;, turnOrder &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   largerChunk &lt;chr&gt;, tokenOrderFirst &lt;dbl&gt;, docTokenSeqFirst &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   tokenOrderLast &lt;dbl&gt;, docTokenSeqLast &lt;dbl&gt;, layer &lt;chr&gt;, and abbreviated</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   variable names ¹​transcript, ²​negPlace</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $verb</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 132 × 23</span></span></span>
<span><span class="co">#&gt;    id          doc   name   nest kind  place text  trans…¹ endNote order negPl…²</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 210FB26A31… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    said  said    <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 744AD104FE… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    was … was n'… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 15B9BB5D50… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    Stay  Stay    <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1A14BB68ED… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    defe… defeats <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2CCD5F5A95… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    know  know    <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1F1135429F… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    's    's      <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2F857247FD… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    a ha… a hard… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 30F18BABDB… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    do n… do n't] <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 94188DEA38… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    is    i:s]    <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 13A37EC506… sbc0… Chun…     1 <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>    do n… do n't… <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 122 more rows, 12 more variables: corpusSeq &lt;chr&gt;, pSentOrder &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   POS_dft &lt;chr&gt;, tokenSeq &lt;chr&gt;, chunkType &lt;chr&gt;, turnOrder &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   largerChunk &lt;chr&gt;, tokenOrderFirst &lt;dbl&gt;, docTokenSeqFirst &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   tokenOrderLast &lt;dbl&gt;, docTokenSeqLast &lt;dbl&gt;, layer &lt;chr&gt;, and abbreviated</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   variable names ¹​transcript, ²​negPlace</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span><span class="op">)</span> <span class="co">#Note: Because there is only one layer for `trackDF`, it is called 'default'.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 31</span></span></span>
<span><span class="co">#&gt;   id       doc   chain sourc…¹ token gapWo…² charC…³ token…⁴ gapUn…⁵ kind  place</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1096E4A… sbc0… 278D… <span style="color: #949494;">""</span>      37EF… N/A           1       1 N/A     <span style="color: #949494;">"</span>Wor… <span style="color: #949494;">"</span>1<span style="color: #949494;">"</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 92F20AC… sbc0… 278D… <span style="color: #949494;">"</span>174E6… 9363… 2             1       1 0       <span style="color: #949494;">"</span>Wor… <span style="color: #949494;">"</span>3<span style="color: #949494;">"</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 7E5BB65… sbc0… 2B67… <span style="color: #949494;">""</span>      744A… N/A          17       5 N/A     <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 1F74D2B… sbc0… 2A01… <span style="color: #949494;">"</span>52452… 1265… N/A           4       1 N/A     <span style="color: #949494;">"</span>Wor… <span style="color: #949494;">"</span>9<span style="color: #949494;">"</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2485C4F… sbc0… 278D… <span style="color: #949494;">"</span>CB1D9… 2113… 10            3       1 1       <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 1BF2260… sbc0… 2A01… <span style="color: #949494;">""</span>      35E3… 5            12       3 1       <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 20 more variables: text &lt;chr&gt;, transcript &lt;chr&gt;, endNote &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   order &lt;chr&gt;, negPlace &lt;chr&gt;, corpusSeq &lt;chr&gt;, pSentOrder &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   POS_dft &lt;chr&gt;, tokenSeq &lt;chr&gt;, chunkType &lt;chr&gt;, turnOrder &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   largerChunk &lt;chr&gt;, tokenOrderFirst &lt;dbl&gt;, tokenOrderLast &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   docTokenSeqFirst &lt;dbl&gt;, docTokenSeqLast &lt;dbl&gt;, chainCreateSeq &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   name &lt;chr&gt;, chainSize &lt;dbl&gt;, layer &lt;chr&gt;, and abbreviated variable names</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​sourceLink, ²​gapWords, ³​charCount, ⁴​tokenCount, ⁵​gapUnits</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ Use `colnames()` to see all variable names</span></span></span></code></pre></div>
<p>More information about the import process and the various objects
created can be found in <code><a href="../articles/import_save_basics.html">vignette("import_save_basics")</a></code>.</p>
<p>Each line of the table <code>rez007$trackDF</code> contains a
referential expression whose size we want to predict. The goal of using
<code>rezonateR</code> for this project will be to produce a version of
the data frame <code>rez007$trackDF</code> that contains all the
predictors and the dependent variable on each line, and may be fed to
models such as <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code>.</p>
<p>You can save the <code>rezrObj</code> so that it can be opend with
<code><a href="../reference/saveload.html">rez_load()</a></code> next time, saving you the trouble of importing
again:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">savePath</span> <span class="op">=</span> <span class="st">"rez007.Rdata"</span></span>
<span><span class="fu"><a href="../reference/saveload.html">rez_save</a></span><span class="op">(</span><span class="va">rez007</span>, <span class="va">savePath</span><span class="op">)</span></span>
<span><span class="co">#&gt; Saving rezrObj ...</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="augmenting-the-file-with-basic-information-automatically">Augmenting the file with basic information automatically<a class="anchor" aria-label="anchor" href="#augmenting-the-file-with-basic-information-automatically"></a>
</h2>
<p>After importing the file, there are a few simple operations that we
usually call to add additional information to the table which was not
added during the original import process.</p>
<div class="section level3">
<h3 id="words-vs-tokens">Words vs tokens<a class="anchor" aria-label="anchor" href="#words-vs-tokens"></a>
</h3>
<p>By default Rezonator provides two fields related to the position of a
token, which you will see in <code>tokenDF</code> as columns:</p>
<ul>
<li>
<code>docTokenSeq</code> - refers to the order of a token within the
entire text</li>
<li>
<code>tokenOrder</code> - refers to the position of a token within
its intonation unit</li>
</ul>
<p>Entities that span multiple tokens, like chunks and units, have four
token sequence-related fields:</p>
<ul>
<li>
<code>docTokenSeqFirst</code> - refers to the
<code>docTokenSeq</code> of the first token.</li>
<li>
<code>docTokenSeqLast</code> - refers to the
<code>docTokenSeq</code> of the first token.</li>
<li>
<code>tokenOrderFirst</code> - refers to the <code>tokenOrder</code>
of the first token.</li>
<li>
<code>tokenOrderLast</code> - refers to the <code>tokenOrder</code>
of the first token.</li>
</ul>
<p>Here are some examples:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">tokenDF</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">text</span>, <span class="va">tokenOrder</span>, <span class="va">docTokenSeq</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   id            text  tokenOrder docTokenSeq</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 31F282855E95E (...)          1           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 363C1D373B2F7 God            2           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3628E4BD4CC05 ,              3           3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 37EFCBECFD691 I              1           4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 12D67756890C1 said           2           5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 936363B71D59  I              3           6</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">chunkDF</span><span class="op">$</span><span class="va">refexpr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">text</span>, <span class="va">tokenOrderFirst</span>, <span class="va">docTokenSeqFirst</span>, <span class="va">tokenOrderLast</span>, <span class="va">docTokenSeqLast</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   id            text                             token…¹ docTo…² token…³ docTo…⁴</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 35E3E0AB6803A Stay up late                           3      17       5      19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1F6B5F0B3FF59 the purpose of getting up in th…       5      25      12      32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 24FE2B219BD21 getting up in the morning              8      28      12      32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 158B579C1BA49 the morning                           11      31      12      32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2B6521E881365 all this other shit                    2     144       5     147</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 5B854594DD34  the way (...) they were feeling        5     156      10     161</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​tokenOrderFirst, ²​docTokenSeqFirst,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​tokenOrderLast, ⁴​docTokenSeqLast</span></span></span></code></pre></div>
<p>Both orders count all tokens. In the Santa Barbara Corpus text we are
using, this includes endnotes (such as <code>,</code> and
<code>.</code>), transcriptions of vocalisms (such as <code>(H)</code>
for in-breaths and <code>@@@</code> for laughter), and so on. What if we
want a version of fields like <code>tokenOrder</code> and
<code>docTokenSeq</code> that excludes these? We can use the function
<code><a href="../reference/addIsWordField.html">addIsWordField()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span> <span class="op">=</span> <span class="fu"><a href="../reference/addIsWordField.html">addIsWordField</a></span><span class="op">(</span><span class="va">rez007</span>, <span class="va">kind</span> <span class="op">==</span> <span class="st">"Word"</span><span class="op">)</span></span></code></pre></div>
<p>This adds the fields <code>wordOrder</code> and
<code>docWordSeq</code> to <code>tokenDF</code> (and also its
counterparts in places like <code>chunkDF</code> and
<code>unitDF</code>, e.g. <code>wordOrderFirst</code>,
<code>wordOrderLast</code>, <code>docWordSeqFirst</code>,
<code>docWordSeqLast</code>). Here’s an example in
<code>tokenDF</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">tokenDF</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">tokenOrder</span>, <span class="va">docTokenSeq</span>, <span class="va">wordOrder</span>, <span class="va">docWordSeq</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   id            tokenOrder docTokenSeq wordOrder docWordSeq</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 31F282855E95E          1           1         0          0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 363C1D373B2F7          2           2         1          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3628E4BD4CC05          3           3         0          0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 37EFCBECFD691          1           4         1          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 12D67756890C1          2           5         2          3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 936363B71D59           3           6         3          4</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="unit-sequence-information">Unit sequence information<a class="anchor" aria-label="anchor" href="#unit-sequence-information"></a>
</h3>
<p>Information about the location of elements other than tokens inside
units is not included by default. The function <code><a href="../reference/addUnitSeq.html">addUnitSeq()</a></code>
does this. Here, <code>unitSeqFirst</code> and <code>unitSeqLast</code>
are added to <code>chunkDF</code> and <code>trackDF</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span> <span class="op">=</span> <span class="fu"><a href="../reference/addUnitSeq.html">addUnitSeq</a></span><span class="op">(</span><span class="va">rez007</span>, <span class="st">"track"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">chunkDF</span><span class="op">$</span><span class="va">refexpr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">text</span>, <span class="va">unitSeqFirst</span>, <span class="va">unitSeqLast</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   id            text                                     unitSeqFirst unitSeqL…¹</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 35E3E0AB6803A Stay up late                                        3          3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1F6B5F0B3FF59 the purpose of getting up in the morning            4          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 24FE2B219BD21 getting up in the morning                           4          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 158B579C1BA49 the morning                                         4          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2B6521E881365 all this other shit                                24         24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 5B854594DD34  the way (...) they were feeling                    26         26</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​unitSeqLast</span></span></span></code></pre></div>
<p>For the details of these functions, see
<code><a href="../articles/time_seq.html">vignette("time_seq")</a></code>.</p>
</div>
<div class="section level3">
<h3 id="linking-up-non-tree-tables-with-tree-related-tables">Linking up non-tree tables with tree-related tables<a class="anchor" aria-label="anchor" href="#linking-up-non-tree-tables-with-tree-related-tables"></a>
</h3>
<p>The function <code><a href="../reference/getAllTreeCorrespondences.html">getAllTreeCorrespondences()</a></code> adds a column
<code>treeEntry</code> to various tables, which gives the corresponding
entry in the table <code>treeEntryDF</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span> <span class="op">=</span> <span class="fu"><a href="../reference/getAllTreeCorrespondences.html">getAllTreeCorrespondences</a></span><span class="op">(</span><span class="va">rez007</span>, entity <span class="op">=</span> <span class="st">"track"</span><span class="op">)</span></span>
<span><span class="co">#&gt; There is more than one tree entry match for the token 37EFCBECFD691. I will take the first match.</span></span>
<span><span class="co">#&gt; There is more than one tree entry match for the token 12D67756890C1. I will take the first match.</span></span>
<span><span class="co">#&gt; There is more than one tree entry match for the token 152560A5DE6AC. I will take the first match.</span></span>
<span><span class="co">#&gt; There is more than one tree entry match for the chunk 210FB26A315A. I will take the first match.</span></span>
<span><span class="co">#&gt; There is more than one tree entry match for the chunk 22273255D825D. I will take the first match.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">tokenDF</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">text</span>, <span class="va">treeEntry</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   id            text  treeEntry      </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 31F282855E95E (...) <span style="color: #949494;">""</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 363C1D373B2F7 God   <span style="color: #949494;">""</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3628E4BD4CC05 ,     <span style="color: #949494;">""</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 37EFCBECFD691 I     <span style="color: #949494;">"</span>E5564F08F4F8<span style="color: #949494;">"</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 12D67756890C1 said  <span style="color: #949494;">"</span>29A7D8B395830<span style="color: #949494;">"</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 936363B71D59  I     <span style="color: #949494;">"</span>163E211526284<span style="color: #949494;">"</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">chunkDF</span><span class="op">$</span><span class="va">refexpr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">text</span>, <span class="va">treeEntry</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   id            text                                     treeEntry     </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 35E3E0AB6803A Stay up late                             <span style="color: #949494;">""</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1F6B5F0B3FF59 the purpose of getting up in the morning <span style="color: #949494;">"</span>5195D71DEA12<span style="color: #949494;">"</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 24FE2B219BD21 getting up in the morning                <span style="color: #949494;">""</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 158B579C1BA49 the morning                              <span style="color: #949494;">""</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2B6521E881365 all this other shit                      <span style="color: #949494;">""</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 5B854594DD34  the way (...) they were feeling          <span style="color: #949494;">""</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">text</span>, <span class="va">treeEntry</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   id            text              treeEntry      </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1096E4AFFFE65 I                 <span style="color: #949494;">"</span>E5564F08F4F8<span style="color: #949494;">"</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 92F20ACA5F06  I                 <span style="color: #949494;">"</span>163E211526284<span style="color: #949494;">"</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 7E5BB65072C   was n't gon na do <span style="color: #949494;">"</span>35B1DC6EA25E5<span style="color: #949494;">"</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 1F74D2B049FA4 this              <span style="color: #949494;">"</span>6FB5A1CE1B70<span style="color: #949494;">"</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2485C4F740FC0 &lt;0&gt;               <span style="color: #949494;">"</span>277C335C33462<span style="color: #949494;">"</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 1BF2260B4AB78 Stay up late      <span style="color: #949494;">""</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="combining-chunks">Combining chunks<a class="anchor" aria-label="anchor" href="#combining-chunks"></a>
</h3>
<p>In Rezonator, it is not possible to create chunks that span multiple
units. <code>rezonateR</code> is equipped with the ability to combine
several chunks inside the file into one larger chunk. There are two
functions for doing this:</p>
<ul>
<li>
<code><a href="../reference/mergeChunksWithTree.html">mergeChunksWithTree()</a></code>: If there is a treeEntry that
corresponds to the concatenation of multiple chunks, then we merge those
chunks.</li>
<li>
<code><a href="../reference/mergeChunksWithIDs.html">mergeChunksWithIDs()</a></code>: We merge chunks by annotating the
ID of the larger chunk that it belongs to, in this case in the field
<code>largerChunk</code>. For example, the first chunk you create this
way may have the ID 1, the second chunk 2, the third chunk 3 and so on.
In this case, all the component chunks of the first complex chunk will
have the value <code>1</code> for <code>largerChunk</code> and so
on.</li>
</ul>
<p>The new chunks will be added to the bottom of <code>chunkDF</code>.
In addition, <code>chunkDF</code> will have an extra column
<code>combinedChunk</code> giving information about chunk
combinations:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span> <span class="op">=</span> <span class="fu"><a href="../reference/mergeChunksWithTree.html">mergeChunksWithTree</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">)</span></span>
<span><span class="va">rez007</span> <span class="op">=</span> <span class="fu"><a href="../reference/mergeChunksWithIDs.html">mergeChunksWithIDs</a></span><span class="op">(</span><span class="va">rez007</span>, <span class="st">"largerChunk"</span><span class="op">)</span></span>
<span><span class="co">#Show combined referential expressions</span></span>
<span><span class="va">rez007</span><span class="op">$</span><span class="va">chunkDF</span><span class="op">$</span><span class="va">refexpr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">combinedChunk</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">text</span>, <span class="va">combinedChunk</span><span class="op">)</span> <span class="co">#Showing only combined chunks and their members</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">#&gt;    id            text                                                    combi…¹</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 17F9B5FA4252A the only way it 's gon na work ,                        |infom…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 33044BB3F044  is if we have respect for one another                   |membe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> DDF62DAF4C20  (H) &lt;0&gt; going to (...) our parents ,                    |infom…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 33FBE08224498 and (...) &lt;0&gt; complaining about one another ,           |membe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2C2FB52C1A11  a real good lesson for them ,                           |infom…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> E818EBA6CB78  too ,                                                   |membe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2A382D1098989 (...) in self assertiveness ,                           |membe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> snhyKeA5fS6tP the only way it 's gon na work , is if we have respect… combin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> HSg180GqsD6O5 (H) &lt;0&gt; going to (...) our parents , and (...) &lt;0&gt; com… combin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1QXursnvopW7R a real good lesson for them , too , (...) in self asse… combin…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​combinedChunk</span></span></span></code></pre></div>
<p><code><a href="../reference/mergedChunksToTrack.html">mergedChunksToTrack()</a></code> puts this information in the
<code>trackDF</code> too:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span> <span class="op">=</span> <span class="fu"><a href="../reference/mergedChunksToTrack.html">mergedChunksToTrack</a></span><span class="op">(</span><span class="va">rez007</span>, <span class="st">"default"</span><span class="op">)</span></span>
<span><span class="co">#Show combined track members</span></span>
<span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">combinedChunk</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">name</span>, <span class="va">text</span>, <span class="va">combinedChunk</span><span class="op">)</span> <span class="co">#Showing only combined chunks and their members</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 4</span></span></span>
<span><span class="co">#&gt;    id            name                           text                     combi…¹</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 24AF3536F90A3 having respect for one another the only way it 's gon … |infom…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1B482778AB561 having respect for one another is if we have respect f… |membe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 33520A5F1B256 Trail 81                       (H) &lt;0&gt; going to (...) … |infom…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 36A2C171D5FFE Trail 81                       and (...) &lt;0&gt; complaini… |membe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 129168B539994 weekly house meetings          a real good lesson for … |infom…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 144636EDDE11B weekly house meetings          too ,                    |membe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 231F6E448A5E7 weekly house meetings          (...) in self assertive… |membe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> PK1s3S4mFDEqj having respect for one another the only way it 's gon … combin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> l3XDxrmMn6qag Trail 81                       (H) &lt;0&gt; going to (...) … combin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> GLAJdZB78PxSE weekly house meetings          a real good lesson for … combin…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​combinedChunk</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="adding-information-about-particular-referential-expressions">Adding information about particular referential expressions<a class="anchor" aria-label="anchor" href="#adding-information-about-particular-referential-expressions"></a>
</h2>
<p>Recall that our final table will need to contain the following
information:</p>
<ul>
<li>
<code>charCount</code> (the dependent variable): The number of
characters in a referential expression.</li>
<li>
<code>noPrevSubjMentionsIn20</code>: The number of coreferent
subject mentions within the 20 previous units.</li>
<li>
<code>noPrevNonSubjMentionsIn20</code>: The number of coreferent
non-subject mentions within the 20 previous units.</li>
<li>
<code>noCompetitors</code>: The number of competitors within the
five previous units.</li>
<li>
<code>Relation</code>: Is the current mention a subject?</li>
<li>
<code>number</code>: Is the current mention singular or plural?</li>
</ul>
<p>The first variable is already computed in Rezonator by default and
need not be included again. The middle four will be added in later
sections. This section will focus on the final variable.</p>
<p>We will first take a guess at what the number is in
<code>rez007$trackDF</code> using a set of simplistic rules. Then we
export a <code>.csv</code> file from <code>rezonateR</code>, and edit
the automatic guesses in Microsoft Excel. We then import the
<code>.csv</code> file back into <code>rezonateR</code> and update
<code>rez007$trackDF</code> from the imported file.</p>
<p>Let’s say we want to annotate the number of the referential
expressions inside <code>trackDF$default</code>. A good approximation
will be to mark everything that ends with &lt;s&gt; as plural, along
with common plural pronouns and demonstratives, mark coordinate noun
phrases as plural, mark noun phrases with singular demonstratives as
singular, mark <em>you</em> as uncertain, and then mark the rest as
singular. Here we use the <code><a href="../reference/rez_mutate.html">rez_mutate()</a></code> function from
TidyRez to do it (see `vignette(“edit_tidyRez”) for more on these
functions):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op">=</span> <span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/rez_mutate.html">rez_mutate</a></span><span class="op">(</span>number <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">text</span>, <span class="st">" and "</span><span class="op">)</span> <span class="op">~</span> <span class="st">"pl"</span>,</span>
<span>  <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_starts.html" class="external-link">str_ends</a></span><span class="op">(</span><span class="va">text</span>, <span class="st">"s"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"pl"</span>,</span>
<span>  <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span>, <span class="st">"(these|those)"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"pl"</span>,</span>
<span>  <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span>, <span class="st">"(this|that)"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"sg"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"we"</span>, <span class="st">"they"</span>, <span class="st">"us"</span>, <span class="st">"them"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"pl"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"you"</span>, <span class="st">"&lt;0&gt;"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"?"</span>,</span>
<span>  <span class="cn">T</span> <span class="op">~</span> <span class="st">"sg"</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">name</span>, <span class="va">text</span>, <span class="va">number</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   id            name            text              number</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1096E4AFFFE65 Mary            I                 sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 92F20ACA5F06  Mary            I                 sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 7E5BB65072C   Trail 87        was n't gon na do sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 1F74D2B049FA4 Staying up late this              pl    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2485C4F740FC0 Mary            &lt;0&gt;               ?     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 1BF2260B4AB78 Staying up late Stay up late      sg</span></span></code></pre></div>
<p>Before we export this as a <code>.csv</code> for annotation, I would
like to add a column inside the <code>trackDF</code> that gives us the
transcription of the entire unit. It will be useful to be able to see
this column while making manual annotations. To simplify, we will just
get the last unit even for multi-line chunks. Here is the code. We are
using <code><a href="../reference/rez_left_join.html">rez_left_join()</a></code>, another TidyRez function, and
extracting the <code>text</code> column of the unit whose
<code>unitSeq</code> in <code>unitDF</code> corresponds to the
<code>unitSeqLast</code> of a referential expression in
<code>trackDF</code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op">=</span> <span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/rez_left_join.html">rez_left_join</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">unitDF</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/rez_select.html">rez_select</a></span><span class="op">(</span><span class="va">unitSeq</span>, <span class="va">text</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>unitSeqLast <span class="op">=</span> <span class="st">"unitSeq"</span><span class="op">)</span>, suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"_unit"</span><span class="op">)</span>, df2key <span class="op">=</span> <span class="st">"unitSeq"</span>, rezrObj <span class="op">=</span> <span class="va">rez007</span>, df2Address <span class="op">=</span> <span class="st">"unitDF"</span>, fkey <span class="op">=</span> <span class="st">"unitSeqLast"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/rez_rename.html">rez_rename</a></span><span class="op">(</span>unitLastText <span class="op">=</span> <span class="va">text_unit</span><span class="op">)</span></span>
<span><span class="co">#&gt; Tip: When performed on a rezrDF inside a rezrObj, rez_rename is a potentially destructive action. It is NOT recommended to assign it back to a rezrDF inside a rezrObj. If you must do so, be careful to update all addresses from other DFs to this DF.</span></span></code></pre></div>
<p>We then write the <code>csv</code> file. We only export a subset of
the columns in the <code>trackDF</code> so that our screen is cleaner
and easier to work with:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rw.html">rez_write_csv</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span>, <span class="st">"rez007_refexpr.csv"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"unitLastText"</span>, <span class="st">"tokenOrderLast"</span>, <span class="st">"text"</span>, <span class="st">"name"</span>, <span class="st">"number"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>An editing best practice is to copy the <code>.csv</code> file and
edit from the copy, rather from the <code>.csv</code> you export
directly. Figure 2 shows what the exported <code>.csv</code> looks like
in Excel:</p>
<div class="figure">
<img src="img/iosave-sbc007.PNG" style="width:100.0%" alt=""><p class="caption">Figure 2</p>
</div>
<p>After editing the CSV in a spreadsheet program, we import it back
using <code><a href="../reference/rw.html">rez_read_csv()</a></code> (specifying the original
<code>rezrDF</code> makes the import processes smoother and less
error-prone):</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">changeDF</span> <span class="op">=</span> <span class="fu"><a href="../reference/rw.html">rez_read_csv</a></span><span class="op">(</span><span class="st">"rez007_refexpr_edited.csv"</span>, origDF <span class="op">=</span> <span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span><span class="op">)</span></span></code></pre></div>
<p>Finally, we use the <code><a href="../reference/updateFromDF.html">updateFromDF()</a></code> function to change
the <code>number</code> column:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op">=</span> <span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/updateFromDF.html">updateFromDF</a></span><span class="op">(</span><span class="va">changeDF</span>, changeCols <span class="op">=</span> <span class="st">"number"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      </span></span>
<span><span class="co">#&gt; "id" </span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">text</span>, <span class="va">number</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   id            text              number</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1096E4AFFFE65 I                 sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 92F20ACA5F06  I                 sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 7E5BB65072C   was n't gon na do sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 1F74D2B049FA4 this              pl    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2485C4F740FC0 &lt;0&gt;               sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 1BF2260B4AB78 Stay up late      sg</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adding-information-about-argument-structure">Adding information about argument structure<a class="anchor" aria-label="anchor" href="#adding-information-about-argument-structure"></a>
</h2>
<p>Now let’s add the <code>Relation</code> variable. We use
<code><a href="../reference/acFieldForeign.html">addFieldForeign()</a></code>, which belongs to the EasyEdit family of
functions covered in <code><a href="../articles/edit_easyEdit.html">vignette("edit_easyEdit")</a></code>. Recall that
we’ve put a <code>treeEntry</code> column in <code>trackDF</code> that
gives the ID of the corresponding tree entry. This code looks into
<code>treeEntryDF</code>, finds the <code>Relation</code> value
corresponding to a <code>treeEntry</code>, and adds it to
<code>trackDF</code>, allowing us to know whether each referential
expression is a subject:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span> <span class="op">=</span> <span class="va">rez007</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/acFieldForeign.html">addFieldForeign</a></span><span class="op">(</span><span class="st">"track"</span>, <span class="st">"default"</span>, <span class="st">"treeEntry"</span>, <span class="st">"default"</span>, <span class="st">"treeEntry"</span>, <span class="st">"Relation"</span>, <span class="st">"Relation"</span>, fieldaccess <span class="op">=</span> <span class="st">"foreign"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rez007</span><span class="op">$</span><span class="va">track</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">chain</span>, <span class="va">text</span>, <span class="va">treeEntry</span>, <span class="va">Relation</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   id            chain         text              treeEntry       Relation</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1096E4AFFFE65 278D0D84814BC I                 <span style="color: #949494;">"</span>E5564F08F4F8<span style="color: #949494;">"</span>  <span style="color: #BB0000;">NA</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 92F20ACA5F06  278D0D84814BC I                 <span style="color: #949494;">"</span>163E211526284<span style="color: #949494;">"</span> Subj    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 7E5BB65072C   2B670736C6823 was n't gon na do <span style="color: #949494;">"</span>35B1DC6EA25E5<span style="color: #949494;">"</span> <span style="color: #BB0000;">NA</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 1F74D2B049FA4 2A01379C5D049 this              <span style="color: #949494;">"</span>6FB5A1CE1B70<span style="color: #949494;">"</span>  <span style="color: #BB0000;">NA</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2485C4F740FC0 278D0D84814BC &lt;0&gt;               <span style="color: #949494;">"</span>277C335C33462<span style="color: #949494;">"</span> Subj    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 1BF2260B4AB78 2A01379C5D049 Stay up late      <span style="color: #949494;">""</span>              <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adding-information-about-discourse-context">Adding information about discourse context<a class="anchor" aria-label="anchor" href="#adding-information-about-discourse-context"></a>
</h2>
<p>Now we only have three predictors left to add:</p>
<ul>
<li>
<code>noPrevSubjMentionsIn20</code>: The number of coreferent
subject mentions within the 20 previous units.</li>
<li>
<code>noPrevNonSubjMentionsIn20</code>: The number of coreferent
non-subject mentions within the 20 previous units.</li>
<li>
<code>noCompetitors</code>: The number of competitors within the
five previous units.</li>
</ul>
<p>We can add the first two using the function
<code><a href="../reference/trackPrevContext.html">countPrevMentionsIf()</a></code>, which counts the number of times
that a referent was mentioned previously in a specified window of units,
along with the TidyRez function <code><a href="../reference/rez_mutate.html">rez_mutate()</a></code> (note that for
non-subjects, we allow <code>Relation</code> to be <code>NA</code>):</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op">=</span> <span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/rez_mutate.html">rez_mutate</a></span><span class="op">(</span>noPrevSubjMentionsIn20 <span class="op">=</span> <span class="fu"><a href="../reference/trackPrevContext.html">countPrevMentionsIf</a></span><span class="op">(</span><span class="fl">20</span>, <span class="va">Relation</span> <span class="op">==</span> <span class="st">"Subj"</span><span class="op">)</span>,</span>
<span>             noPrevNonSubjMentionsIn20 <span class="op">=</span> <span class="fu"><a href="../reference/trackPrevContext.html">countPrevMentionsIf</a></span><span class="op">(</span><span class="fl">20</span>, <span class="va">Relation</span> <span class="op">!=</span> <span class="st">"Subj"</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Relation</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">noPrevSubjMentionsIn20</span>, <span class="va">noPrevNonSubjMentionsIn20</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 3</span></span></span>
<span><span class="co">#&gt;    id            noPrevSubjMentionsIn20 noPrevNonSubjMentionsIn20</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1096E4AFFFE65                      0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 92F20ACA5F06                       0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 7E5BB65072C                        0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1F74D2B049FA4                      0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2485C4F740FC0                      2                         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1BF2260B4AB78                      1                         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 6B37B5A80F2A                       2                         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 259C2C2979B6C                      0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1D1F2B7054E32                      0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1FA3806680C84                      0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 4B32FD84BA10                       0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 3098AB24A0FA6                      3                         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 2D5885FCA1E15                      0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 1C311FD331AC4                      1                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 2E01153F693D3                      4                         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> 28CFE0272CE1C                      2                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> 24229602BDC4C                      3                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> 1A598AE39592B                      0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> 38C628AB4DA4D                      0                         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> 36B8918BB6E64                      5                         2</span></span></code></pre></div>
<p>The second one can be added using the function
<code><a href="../reference/countCompete.html">countCompetitors()</a></code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op">=</span> <span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/rez_mutate.html">rez_mutate</a></span><span class="op">(</span>noCompetitors <span class="op">=</span> <span class="fu"><a href="../reference/countCompete.html">countCompetitors</a></span><span class="op">(</span>windowSize <span class="op">=</span> <span class="fl">40</span>, between <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">noCompetitors</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 2</span></span></span>
<span><span class="co">#&gt;    id            noCompetitors</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1096E4AFFFE65             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 92F20ACA5F06              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 7E5BB65072C               2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1F74D2B049FA4             3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2485C4F740FC0             2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1BF2260B4AB78             4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 6B37B5A80F2A              4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 259C2C2979B6C             7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1D1F2B7054E32             7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1FA3806680C84             7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 4B32FD84BA10             10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 3098AB24A0FA6             8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 2D5885FCA1E15            10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 1C311FD331AC4            10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 2E01153F693D3             7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> 28CFE0272CE1C             7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> 24229602BDC4C             3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> 1A598AE39592B             6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> 38C628AB4DA4D             3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> 36B8918BB6E64             3</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conducting-the-analysis">Conducting the analysis<a class="anchor" aria-label="anchor" href="#conducting-the-analysis"></a>
</h2>
<p>Let’s check that <code>rez007$trackDF</code> now has all the required
elements:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">charCount</span>, <span class="va">noPrevSubjMentionsIn20</span>, <span class="va">noPrevNonSubjMentionsIn20</span>, <span class="va">noCompetitors</span>, <span class="va">Relation</span>, <span class="va">number</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 7</span></span></span>
<span><span class="co">#&gt;    id            charCount noPrevSubjMentionsIn20 noPre…¹ noCom…² Relat…³ number</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1096E4AFFFE65         1                      0       0       0 <span style="color: #BB0000;">NA</span>      sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 92F20ACA5F06          1                      0       0       0 Subj    sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 7E5BB65072C          17                      0       0       2 <span style="color: #BB0000;">NA</span>      sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1F74D2B049FA4         4                      0       0       3 <span style="color: #BB0000;">NA</span>      pl    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2485C4F740FC0         3                      2       1       2 Subj    sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1BF2260B4AB78        12                      1       1       4 <span style="color: #BB0000;">NA</span>      sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 6B37B5A80F2A          3                      2       2       4 Subj    sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 259C2C2979B6C        40                      0       0       7 <span style="color: #BB0000;">NA</span>      sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1D1F2B7054E32        25                      0       0       7 <span style="color: #BB0000;">NA</span>      sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1FA3806680C84        11                      0       0       7 <span style="color: #BB0000;">NA</span>      sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 4B32FD84BA10          1                      0       0      10 Subj    sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 3098AB24A0FA6         2                      3       2       8 Subj    sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 2D5885FCA1E15        21                      0       0      10 <span style="color: #BB0000;">NA</span>      sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 1C311FD331AC4         1                      1       0      10 Subj    sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 2E01153F693D3         2                      4       2       7 Subj    sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> 28CFE0272CE1C         1                      2       0       7 Subj    sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> 24229602BDC4C         1                      3       0       3 Subj    sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> 1A598AE39592B         8                      0       0       6 <span style="color: #BB0000;">NA</span>      sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> 38C628AB4DA4D         4                      0       0       3 <span style="color: #BB0000;">NA</span>      sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> 36B8918BB6E64         1                      5       2       3 Subj    sg    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​noPrevNonSubjMentionsIn20, ²​noCompetitors,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​Relation</span></span></span></code></pre></div>
<p>Before analysis, let’s change the NAs in the <code>Relation</code>
column to <code>"NonSubj"</code> and change <code>Relation</code> and
<code>number</code> to factors:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analysis_df</span> <span class="op">=</span> <span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/rez_mutate.html">rez_mutate</a></span><span class="op">(</span>Relation <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/coalesce.html" class="external-link">coalesce</a></span><span class="op">(</span><span class="va">Relation</span>, <span class="st">"NonSubj"</span><span class="op">)</span>, fieldaccess <span class="op">=</span> <span class="st">"flex"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/stringToFactor.html">stringToFactor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Relation"</span>, <span class="st">"number"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Note that you are changing a field Relation from auto to flex This field will no longer reload.</span></span>
<span><span class="va">rez007</span><span class="op">$</span><span class="va">trackDF</span><span class="op">$</span><span class="va">default</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">Relation</span>, <span class="va">number</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 3</span></span></span>
<span><span class="co">#&gt;    id            Relation number</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1096E4AFFFE65 <span style="color: #BB0000;">NA</span>       sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 92F20ACA5F06  Subj     sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 7E5BB65072C   <span style="color: #BB0000;">NA</span>       sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1F74D2B049FA4 <span style="color: #BB0000;">NA</span>       pl    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2485C4F740FC0 Subj     sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1BF2260B4AB78 <span style="color: #BB0000;">NA</span>       sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 6B37B5A80F2A  Subj     sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 259C2C2979B6C <span style="color: #BB0000;">NA</span>       sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1D1F2B7054E32 <span style="color: #BB0000;">NA</span>       sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1FA3806680C84 <span style="color: #BB0000;">NA</span>       sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 4B32FD84BA10  Subj     sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 3098AB24A0FA6 Subj     sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 2D5885FCA1E15 <span style="color: #BB0000;">NA</span>       sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 1C311FD331AC4 Subj     sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 2E01153F693D3 Subj     sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> 28CFE0272CE1C Subj     sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> 24229602BDC4C Subj     sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> 1A598AE39592B <span style="color: #BB0000;">NA</span>       sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> 38C628AB4DA4D <span style="color: #BB0000;">NA</span>       sg    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> 36B8918BB6E64 Subj     sg</span></span></code></pre></div>
<p>And so we have our analysis:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lm_nochar</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">charCount</span> <span class="op">~</span> <span class="va">noPrevSubjMentionsIn20</span> <span class="op">+</span> <span class="va">noPrevNonSubjMentionsIn20</span> <span class="op">+</span> <span class="va">noCompetitors</span> <span class="op">+</span> <span class="va">Relation</span> <span class="op">+</span> <span class="va">number</span>, data <span class="op">=</span> <span class="va">analysis_df</span><span class="op">)</span></span>
<span><span class="va">lm_nochar</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; lm(formula = charCount ~ noPrevSubjMentionsIn20 + noPrevNonSubjMentionsIn20 + </span></span>
<span><span class="co">#&gt;     noCompetitors + Relation + number, data = analysis_df)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;               (Intercept)     noPrevSubjMentionsIn20  </span></span>
<span><span class="co">#&gt;                   11.7769                    -0.5479  </span></span>
<span><span class="co">#&gt; noPrevNonSubjMentionsIn20              noCompetitors  </span></span>
<span><span class="co">#&gt;                   -0.4999                     0.3471  </span></span>
<span><span class="co">#&gt;              RelationSubj                   numbersg  </span></span>
<span><span class="co">#&gt;                   -7.3806                    -0.9939</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova</a></span><span class="op">(</span><span class="va">lm_nochar</span><span class="op">)</span></span>
<span><span class="co">#&gt; Analysis of Variance Table</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Response: charCount</span></span>
<span><span class="co">#&gt;                            Df  Sum Sq Mean Sq F value    Pr(&gt;F)    </span></span>
<span><span class="co">#&gt; noPrevSubjMentionsIn20      1  2811.0 2810.98 28.0225 2.835e-07 ***</span></span>
<span><span class="co">#&gt; noPrevNonSubjMentionsIn20   1     1.0    1.00  0.0099    0.9207    </span></span>
<span><span class="co">#&gt; noCompetitors               1   429.4  429.35  4.2802    0.0397 *  </span></span>
<span><span class="co">#&gt; Relation                    1  2798.0 2797.99 27.8929 3.009e-07 ***</span></span>
<span><span class="co">#&gt; number                      1    34.0   33.95  0.3385    0.5613    </span></span>
<span><span class="co">#&gt; Residuals                 226 22670.5  100.31                      </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre></div>
<p>As we can see, <code>noPrevSubjMentionsIn20</code>,
<code>noPrevNonSubjMentionsIn20</code> and <code>Relation</code> emerge
as very good predictors, with entities mentioned more in the previous 20
units and which are subjects having a much stronger tendency to be
light.</p>
</div>
<div class="section level2">
<h2 id="where-to-go-from-here">Where to go from here?<a class="anchor" aria-label="anchor" href="#where-to-go-from-here"></a>
</h2>
<p>This simple project shows most of the basic capabilities of
<code>rezonateR</code>, though it still leaves out a lot, such as
<em>reloads</em>, which allows you to update certain column
automatically after changing other columns.
<code><a href="../articles/overview.html">vignette("overview")</a></code> is a less topically focused overview
of the package, less focused on a single problem but covering more
topics. The series of tutorials starting from
<code><a href="../articles/import_save_basics.html">vignette("import_save_basics")</a></code> covers most functionality of
the package down to the smallest details, and you can pick and choose
topics from there to read. Good luck!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ryan Ka Yau Lai, John W Du Bois.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
